import { ref, computed } from 'vue';

const translations = {
    no: {
        // Navigation
        'nav.language': 'EN',
        'nav.play': 'Spill',
        'nav.archive': 'Arkiv',
        'nav.hallOfFame': 'Hall of Fame',
        'nav.leaderboard': 'Toppliste',
        'nav.login': 'Logg inn',
        'nav.register': 'Registrer',
        'nav.logout': 'Logg ut',
        'nav.createAccount': 'Opprett konto',
        'nav.profile': 'Profil',
        'nav.settings': 'Innstillinger',
        'nav.admin': 'Admin',

        // Guest banner
        'guest.banner': 'Du spiller som gjest. Opprett en konto for å lagre statistikk.',
        'guest.createAccount': 'Opprett konto',

        // Hero / Welcome
        'hero.title': 'SELECT',
        'hero.subtitle': 'Fra #select på EFnet — nå på mobilen din',
        'hero.description': 'Det klassiske akronym-spillet der kreativitet og humor vinner',
        'how.title': 'Slik spiller du',
        'how.step1.title': 'Få et akronym',
        'how.step1.desc': 'Delectus gir deg tilfeldige bokstaver som du skal lage en setning av',
        'how.step2.title': 'Lag en setning',
        'how.step2.desc': 'Hvert ord må starte med riktig bokstav',
        'how.step3.title': 'Stem på den beste',
        'how.step3.desc': 'Alle stemmer på sin favoritt — men ikke på sin egen!',
        'how.step4.title': 'Vinn runden!',
        'how.step4.desc': 'Flest stemmer gir poeng. Mest poeng vinner spillet!',
        'cta.play': 'Spill nå',
        'cta.download': 'Last ned appen',
        'cta.browse': 'Se arkivet',
        'stats.gamesPlayed': 'Spill spilt',
        'stats.sentences': 'Setninger',
        'stats.activePlayers': 'Aktive spillere',
        'footer.tagline': 'Delectus — spillmesteren fra #select på EFnet',

        // Auth
        'auth.login.title': 'Logg inn',
        'auth.login.email': 'E-post',
        'auth.login.password': 'Passord',
        'auth.login.submit': 'Logg inn',
        'auth.login.forgotPassword': 'Glemt passord?',
        'auth.login.noAccount': 'Har du ikke konto?',
        'auth.login.register': 'Registrer deg',
        'auth.login.twoFactor': 'Totrinnsverifisering',
        'auth.login.twoFactorCode': 'Skriv inn kode fra autentiseringsappen',
        'auth.register.title': 'Opprett konto',
        'auth.register.name': 'Navn',
        'auth.register.email': 'E-post',
        'auth.register.nickname': 'Kallenavn',
        'auth.register.password': 'Passord',
        'auth.register.confirmPassword': 'Bekreft passord',
        'auth.register.submit': 'Registrer',
        'auth.register.hasAccount': 'Har du allerede konto?',
        'auth.register.login': 'Logg inn',
        'auth.forgotPassword.title': 'Glemt passord',
        'auth.forgotPassword.description': 'Skriv inn e-postadressen din for å motta en tilbakestillingslenke.',
        'auth.forgotPassword.submit': 'Send lenke',
        'auth.forgotPassword.sent': 'Tilbakestillingslenke sendt! Sjekk e-posten din.',
        'auth.resetPassword.title': 'Tilbakestill passord',
        'auth.resetPassword.newPassword': 'Nytt passord',
        'auth.resetPassword.confirmPassword': 'Bekreft passord',
        'auth.resetPassword.submit': 'Tilbakestill',
        'auth.guest.title': 'Spill som gjest',
        'auth.guest.nickname': 'Velg kallenavn',
        'auth.guest.submit': 'Start',
        'auth.or': 'eller',
        'auth.playAsGuest': 'Spill som gjest',

        // Games
        'games.title': 'Spill',
        'games.openGames': 'Åpne spill',
        'games.noGames': 'Ingen åpne spill. Opprett et!',
        'games.create': 'Opprett spill',
        'games.joinByCode': 'Bli med via kode',
        'games.join': 'Bli med',
        'games.players': 'spillere',
        'games.rounds': 'runder',
        'games.code': 'Spillkode',
        'games.enterCode': 'Skriv inn 6-tegns kode',

        // Create game
        'create.title': 'Opprett spill',
        'create.rounds': 'Antall runder',
        'create.answerTime': 'Svartid',
        'create.voteTime': 'Stemmetid',
        'create.timeBetweenRounds': 'Tid mellom runder',
        'create.acronymLength': 'Akronymlengde',
        'create.maxPlayers': 'Maks spillere',
        'create.excludeLetters': 'Ekskluder bokstaver',
        'create.visibility': 'Synlighet',
        'create.public': 'Offentlig',
        'create.private': 'Privat',
        'create.password': 'Passord',
        'create.submit': 'Opprett spill',
        'create.seconds': 'sekunder',

        // Lobby
        'lobby.title': 'Lobby',
        'lobby.gameCode': 'Spillkode',
        'lobby.copyCode': 'Kopier kode',
        'lobby.copied': 'Kopiert!',
        'lobby.shareLink': 'Del lenke',
        'lobby.waitingForHost': 'Venter på at verten starter spillet...',
        'lobby.startGame': 'Start spill',
        'lobby.needMorePlayers': 'Trenger minst 2 spillere',
        'lobby.host': 'Vert',
        'lobby.settings': 'Innstillinger',

        // Game
        'game.leave': 'Forlat',
        'game.round': 'Runde',
        'game.of': 'av',
        'game.timeLeft': 'Tid igjen',
        'game.submitAnswer': 'Send svar',
        'game.yourAnswer': 'Ditt svar',
        'game.waitingForOthers': 'Venter på andre...',
        'game.submitted': 'innsendt',
        'game.wordsMatch': 'ord matcher',
        'game.voting': 'Stemming',
        'game.vote': 'Stem',
        'game.confirmVote': 'Bekreft stemme',
        'game.yourSubmission': 'Ditt svar',
        'game.results': 'Resultater',
        'game.winner': 'Vinner',
        'game.votes': 'stemmer',
        'game.points': 'poeng',
        'game.nextRound': 'Neste runde om',
        'game.scoreboard': 'Poengstavle',
        'game.finished': 'Spill ferdig!',
        'game.finalScores': 'Sluttresultat',
        'game.playAgain': 'Spill igjen',
        'game.viewArchive': 'Se i arkivet',
        'game.chat': 'Chat',
        'game.sendMessage': 'Send melding...',

        // Archive
        'archive.title': 'Spillarkiv',
        'archive.allTime': 'Alle tider',
        'archive.thisMonth': 'Denne måneden',
        'archive.thisWeek': 'Denne uken',
        'archive.filterByPlayer': 'Filtrer etter spiller...',
        'archive.viewGame': 'Se spill',
        'archive.noGames': 'Ingen spill funnet.',
        'archive.loadMore': 'Last inn flere',
        'archive.backToArchive': 'Tilbake til arkiv',
        'archive.shareGame': 'Del spill',
        'archive.finalStandings': 'Sluttresultat',
        'archive.votedBy': 'Stemt av',

        // Leaderboard
        'leaderboard.title': 'Toppliste',
        'leaderboard.rank': 'Plass',
        'leaderboard.player': 'Spiller',
        'leaderboard.gamesPlayed': 'Spill',
        'leaderboard.gamesWon': 'Seiere',
        'leaderboard.winRate': 'Vinnprosent',
        'leaderboard.roundsWon': 'Runder vunnet',

        // Hall of Fame
        'hallOfFame.title': 'Hall of Fame',
        'hallOfFame.classic': 'Klassiker fra IRC',
        'hallOfFame.noSentences': 'Ingen setninger ennå.',

        // Profile
        'profile.memberSince': 'Medlem siden',
        'profile.gamesPlayed': 'Spill spilt',
        'profile.gamesWon': 'Spill vunnet',
        'profile.winRate': 'Vinnprosent',
        'profile.roundsWon': 'Runder vunnet',
        'profile.votesReceived': 'Stemmer mottatt',
        'profile.bestSentences': 'Beste setninger',
        'profile.gameHistory': 'Spillhistorikk',
        'profile.settings.title': 'Innstillinger',
        'profile.settings.changePassword': 'Endre passord',
        'profile.settings.twoFactor': 'Totrinnsverifisering',
        'profile.settings.sound': 'Lyd',
        'profile.settings.deleteAccount': 'Slett konto',

        // Admin
        'admin.title': 'Administrasjon',
        'admin.players': 'Spillere',
        'admin.games': 'Spill',
        'admin.stats': 'Statistikk',
        'admin.ban': 'Utesteng',
        'admin.unban': 'Opphev utestengelse',
        'admin.banReason': 'Årsak',

        // Common
        'common.loading': 'Laster...',
        'common.error': 'Noe gikk galt',
        'common.retry': 'Prøv igjen',
        'common.save': 'Lagre',
        'common.cancel': 'Avbryt',
        'common.confirm': 'Bekreft',
        'common.back': 'Tilbake',
        'common.notFound': 'Siden ble ikke funnet',
        'common.notFoundDesc': 'Beklager, vi finner ikke denne siden.',
        'common.goHome': 'Gå til forsiden',
    },
    en: {
        // Navigation
        'nav.language': 'NO',
        'nav.play': 'Play',
        'nav.archive': 'Archive',
        'nav.hallOfFame': 'Hall of Fame',
        'nav.leaderboard': 'Leaderboard',
        'nav.login': 'Log in',
        'nav.register': 'Register',
        'nav.logout': 'Log out',
        'nav.createAccount': 'Create account',
        'nav.profile': 'Profile',
        'nav.settings': 'Settings',
        'nav.admin': 'Admin',

        // Guest banner
        'guest.banner': 'Playing as guest. Create an account to save your stats.',
        'guest.createAccount': 'Create account',

        // Hero / Welcome
        'hero.title': 'SELECT',
        'hero.subtitle': 'From #select on EFnet — now on your phone',
        'hero.description': 'The classic acronym game where creativity and humor wins',
        'how.title': 'How to play',
        'how.step1.title': 'Get an acronym',
        'how.step1.desc': 'Delectus gives you random letters that you need to form a sentence from',
        'how.step2.title': 'Create a sentence',
        'how.step2.desc': 'Each word must start with the correct letter',
        'how.step3.title': 'Vote for the best',
        'how.step3.desc': "Everyone votes for their favorite — but not their own!",
        'how.step4.title': 'Win the round!',
        'how.step4.desc': 'Most votes earn points. Most points wins the game!',
        'cta.play': 'Play now',
        'cta.download': 'Get the app',
        'cta.browse': 'Browse archive',
        'stats.gamesPlayed': 'Games played',
        'stats.sentences': 'Sentences',
        'stats.activePlayers': 'Active players',
        'footer.tagline': 'Delectus — the game master from #select on EFnet',

        // Auth
        'auth.login.title': 'Log in',
        'auth.login.email': 'Email',
        'auth.login.password': 'Password',
        'auth.login.submit': 'Log in',
        'auth.login.forgotPassword': 'Forgot password?',
        'auth.login.noAccount': "Don't have an account?",
        'auth.login.register': 'Register',
        'auth.login.twoFactor': 'Two-factor authentication',
        'auth.login.twoFactorCode': 'Enter code from your authenticator app',
        'auth.register.title': 'Create account',
        'auth.register.name': 'Name',
        'auth.register.email': 'Email',
        'auth.register.nickname': 'Nickname',
        'auth.register.password': 'Password',
        'auth.register.confirmPassword': 'Confirm password',
        'auth.register.submit': 'Register',
        'auth.register.hasAccount': 'Already have an account?',
        'auth.register.login': 'Log in',
        'auth.forgotPassword.title': 'Forgot password',
        'auth.forgotPassword.description': 'Enter your email address and we will send you a reset link.',
        'auth.forgotPassword.submit': 'Send link',
        'auth.forgotPassword.sent': 'Reset link sent! Check your email.',
        'auth.resetPassword.title': 'Reset password',
        'auth.resetPassword.newPassword': 'New password',
        'auth.resetPassword.confirmPassword': 'Confirm password',
        'auth.resetPassword.submit': 'Reset',
        'auth.guest.title': 'Play as guest',
        'auth.guest.nickname': 'Choose a nickname',
        'auth.guest.submit': 'Start',
        'auth.or': 'or',
        'auth.playAsGuest': 'Play as guest',

        // Games
        'games.title': 'Games',
        'games.openGames': 'Open games',
        'games.noGames': 'No open games. Create one!',
        'games.create': 'Create game',
        'games.joinByCode': 'Join by code',
        'games.join': 'Join',
        'games.players': 'players',
        'games.rounds': 'rounds',
        'games.code': 'Game code',
        'games.enterCode': 'Enter 6-character code',

        // Create game
        'create.title': 'Create game',
        'create.rounds': 'Rounds',
        'create.answerTime': 'Answer time',
        'create.voteTime': 'Vote time',
        'create.timeBetweenRounds': 'Time between rounds',
        'create.acronymLength': 'Acronym length',
        'create.maxPlayers': 'Max players',
        'create.excludeLetters': 'Exclude letters',
        'create.visibility': 'Visibility',
        'create.public': 'Public',
        'create.private': 'Private',
        'create.password': 'Password',
        'create.submit': 'Create game',
        'create.seconds': 'seconds',

        // Lobby
        'lobby.title': 'Lobby',
        'lobby.gameCode': 'Game code',
        'lobby.copyCode': 'Copy code',
        'lobby.copied': 'Copied!',
        'lobby.shareLink': 'Share link',
        'lobby.waitingForHost': 'Waiting for host to start the game...',
        'lobby.startGame': 'Start game',
        'lobby.needMorePlayers': 'Need at least 2 players',
        'lobby.host': 'Host',
        'lobby.settings': 'Settings',

        // Game
        'game.leave': 'Leave',
        'game.round': 'Round',
        'game.of': 'of',
        'game.timeLeft': 'Time left',
        'game.submitAnswer': 'Submit answer',
        'game.yourAnswer': 'Your answer',
        'game.waitingForOthers': 'Waiting for others...',
        'game.submitted': 'submitted',
        'game.wordsMatch': 'words match',
        'game.voting': 'Voting',
        'game.vote': 'Vote',
        'game.confirmVote': 'Confirm vote',
        'game.yourSubmission': 'Your answer',
        'game.results': 'Results',
        'game.winner': 'Winner',
        'game.votes': 'votes',
        'game.points': 'points',
        'game.nextRound': 'Next round in',
        'game.scoreboard': 'Scoreboard',
        'game.finished': 'Game finished!',
        'game.finalScores': 'Final scores',
        'game.playAgain': 'Play again',
        'game.viewArchive': 'View in archive',
        'game.chat': 'Chat',
        'game.sendMessage': 'Send message...',

        // Archive
        'archive.title': 'Game Archive',
        'archive.allTime': 'All time',
        'archive.thisMonth': 'This month',
        'archive.thisWeek': 'This week',
        'archive.filterByPlayer': 'Filter by player...',
        'archive.viewGame': 'View game',
        'archive.noGames': 'No games found.',
        'archive.loadMore': 'Load more',
        'archive.backToArchive': 'Back to archive',
        'archive.shareGame': 'Share game',
        'archive.finalStandings': 'Final standings',
        'archive.votedBy': 'Voted by',

        // Leaderboard
        'leaderboard.title': 'Leaderboard',
        'leaderboard.rank': 'Rank',
        'leaderboard.player': 'Player',
        'leaderboard.gamesPlayed': 'Games',
        'leaderboard.gamesWon': 'Wins',
        'leaderboard.winRate': 'Win rate',
        'leaderboard.roundsWon': 'Rounds won',

        // Hall of Fame
        'hallOfFame.title': 'Hall of Fame',
        'hallOfFame.classic': 'Classic from IRC',
        'hallOfFame.noSentences': 'No sentences yet.',

        // Profile
        'profile.memberSince': 'Member since',
        'profile.gamesPlayed': 'Games played',
        'profile.gamesWon': 'Games won',
        'profile.winRate': 'Win rate',
        'profile.roundsWon': 'Rounds won',
        'profile.votesReceived': 'Votes received',
        'profile.bestSentences': 'Best sentences',
        'profile.gameHistory': 'Game history',
        'profile.settings.title': 'Settings',
        'profile.settings.changePassword': 'Change password',
        'profile.settings.twoFactor': 'Two-factor authentication',
        'profile.settings.sound': 'Sound',
        'profile.settings.deleteAccount': 'Delete account',

        // Admin
        'admin.title': 'Administration',
        'admin.players': 'Players',
        'admin.games': 'Games',
        'admin.stats': 'Statistics',
        'admin.ban': 'Ban',
        'admin.unban': 'Unban',
        'admin.banReason': 'Reason',

        // Common
        'common.loading': 'Loading...',
        'common.error': 'Something went wrong',
        'common.retry': 'Try again',
        'common.save': 'Save',
        'common.cancel': 'Cancel',
        'common.confirm': 'Confirm',
        'common.back': 'Back',
        'common.notFound': 'Page not found',
        'common.notFoundDesc': 'Sorry, we could not find this page.',
        'common.goHome': 'Go to home page',
    },
};

const STORAGE_KEY = 'select-locale';

const locale = ref(localStorage.getItem(STORAGE_KEY) || 'no');

export function useI18n() {
    function t(key) {
        return translations[locale.value]?.[key] ?? key;
    }

    function toggleLocale() {
        locale.value = locale.value === 'no' ? 'en' : 'no';
        localStorage.setItem(STORAGE_KEY, locale.value);
    }

    const isNorwegian = computed(() => locale.value === 'no');

    return { locale, t, toggleLocale, isNorwegian };
}
